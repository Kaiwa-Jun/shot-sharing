# コストと制約

## 1. 運用コスト

### File Search APIのコスト構造

- **File Search**: 初回インデックスのみ課金（$0.15/100万トークン目安）。検索は無料、生成時のトークンは従量

### 制約事項

- **ファイルサイズ制限**: 1ファイル最大100MB
- **ストア容量**: 20GB以下推奨（遅延対策）

## 2. 月額コスト試算

| 項目 | 小規模（10人） | 中規模（50人） | 大規模（100人） |
|------|--------------|--------------|----------------|
| **利用者数** | 10人 | 50人 | 100人 |
| **月間投稿数** | 50枚<br>(5枚/人) | 500枚<br>(10枚/人) | 2,000枚<br>(20枚/人) |
| **月間検索数** | 300回<br>(30回/人) | 2,500回<br>(50回/人) | 10,000回<br>(100回/人) |
| **インデックス作成**<br>(初回コスト) | 50,000トークン<br>**$0.008** | 500,000トークン<br>**$0.075** | 2,000,000トークン<br>**$0.30** |
| **回答生成**<br>(運用コスト) | 150,000トークン<br>**$0.011** | 1,250,000トークン<br>**$0.094** | 5,000,000トークン<br>**$0.375** |
| **月額合計** | **$0.02**<br>(約3円) | **$0.17**<br>(約26円) | **$0.68**<br>(約102円) |
| **ストレージ使用**<br>(画像5MB/枚) | 250MB | 2.5GB | 10GB |

## 3. その他のコスト要因

### Supabase

- **無料プラン**: 500MBデータベース、1GBストレージ、50,000月間アクティブユーザーまで
- **Proプラン**: $25/月（必要に応じて）

### Vercel

- **無料プラン**: 個人プロジェクトは無料
- **Proプラン**: $20/月（チーム機能が必要な場合）

### 想定される追加コスト

- 大規模運用時はSupabase Proプランが必要になる可能性
- 画像ストレージが1GBを超える場合は追加料金が発生
